language: go

install:
    - sudo apt-get install hugo
    - go get github.com/tdewolff/minify/cmd/minify

script:
    - hugo
    - minify -r public/ -o public/ --html-keep-whitespace --html-keep-document-tags

deploy:
    provider: pages
    skip_cleanup: true
    on:
        branch: master

    github_token: $GITHUB_TOKEN
    repo: edoren/edoren.github.io
    local_dir: public/
    target_branch: master
    fqdn: edoren.me
